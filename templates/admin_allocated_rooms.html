{% extends 'layout.html' %}
{% block content %}
  <h3>Allocated Rooms</h3>
  <table class="table mt-3">
    <thead><tr><th>#</th><th>Student</th><th>Room</th><th>Start</th><th>End</th><th>Actions</th></tr></thead>
    <tbody>
      {% for a in allocations %}
      <tr>
        <td>{{ a.id }}</td>
        <td>{{ a.student.name }} ({{ a.student.roll_no }})</td>
        <td>{{ a.room.number }}</td>
        <td>{{ a.start_date.date() if a.start_date }}</td>
        <td>{{ a.end_date.date() if a.end_date }}</td>
        <td>
          <form method="post" action="/admin/vacate_room" style="display:inline">
            <input type="hidden" name="student_id" value="{{ a.student.id }}" />
            <button class="btn btn-sm btn-danger">Vacate</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <a class="btn btn-primary" href="/admin/allocate_room">Allocate Room</a>
{% endblock %}
